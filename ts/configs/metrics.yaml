mode: prometheus

dimensions:
  - &model_name "ModelName"
  - &model_version "ModelVersion"
  - &worker_name "WorkerName"
  - &level "Level"
  - &device_id "DeviceId"
  - &hostname "Hostname"

ts_metrics:
  counter:
    - name: Requests2XX
      unit: count
      dimensions: [*level, *hostname]
    - name: Requests4XX
      unit: count
      dimensions: [*level, *hostname]
    - name: Requests5XX
      unit: count
      dimensions: [*level, *hostname]
    - name: InferenceRequestsTotal
      unit: count
      dimensions: [*model_name, *model_version, *hostname]
  gauge:
    - name: QueueTime
      unit: ms
      dimensions: [*level, *hostname]
    - name: WorkerThreadTime
      unit: ms
      dimensions: [*level, *hostname]
    - name: WorkerLoadTime
      unit: ms
      dimensions: [*worker_name, *level, *hostname]
    - name: CPUUtilization
      unit: percent
      dimensions: [*level, *hostname]
    - name: MemoryUsed
      unit: MB
      dimensions: [*level, *hostname]
    - name: MemoryAvailable
      unit: MB
      dimensions: [*level, *hostname]
    - name: MemoryUtilization
      unit: percent
      dimensions: [*level, *hostname]
    - name: DiskUsage
      unit: GB
      dimensions: [*level, *hostname]
    - name: DiskUtilization
      unit: percent
      dimensions: [*level, *hostname]
    - name: DiskAvailable
      unit: GB
      dimensions: [*level, *hostname]
    - name: GPUMemoryUtilization
      unit: percent
      dimensions: [*level, *device_id, *hostname]
    - name: GPUMemoryUsed
      unit: MB
      dimensions: [*level, *device_id, *hostname]
    - name: GPUUtilization
      unit: percent
      dimensions: [*level, *device_id, *hostname]
    - name: InferenceLatencyMicroseconds
      unit: microseconds
      dimensions: [*model_name, *model_version, *hostname]
    - name: QueueLatencyMicroseconds
      unit: microseconds
      dimensions: [*model_name, *model_version, *hostname]

model_metrics:
  # Dimension "hostname" is automatically added for model metrics in the backend
  gauge:
    - name: HandlerTime
      unit: ms
      dimensions: [*model_name, *level]
    - name: PredictionTime
      unit: ms
      dimensions: [*model_name, *level]
